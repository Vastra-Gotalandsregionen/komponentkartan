<app-component-docs [componentName]="'Combobox'">
    <div class="docs__overview">
  
      <vgr-combobox  [value]="vc_selected">
        <vgr-combobox-item *ngFor="let enhet of vc_namn">{{enhet}}</vgr-combobox-item>
      </vgr-combobox>
  
  
      <br><button (click)="andralangd()">ändra längd på dd</button><br>
      <p>Dropdown select finns i två bredder, har en rad olika alternativ och följer temafärg.</p>
      <vgr-combobox [readonly]="readonly" [disabled]="disabled" #myDropdown>
        <vgr-combobox-item>Apelsin</vgr-combobox-item>
        <vgr-combobox-item>Banan</vgr-combobox-item>
        <vgr-combobox-item>Citron</vgr-combobox-item>
      </vgr-combobox>
  
      <br><br>
      <vgr-button (click)="setFocus()">Sätt fokus</vgr-button>
      <vgr-button [buttonStyle]="'secondary'" (click)="toggleReadonly()">Readonly</vgr-button>
      <vgr-button [buttonStyle]="'secondary'" [disabled]="readonly" (click)="toggleDisabled(disabled)">
        {{ disabled ? 'Aktivera' : 'Inaktivera'}}</vgr-button>
      <br><br>
  
      <p>Detta händer automatiskt:</p>
      <ul>
        <li>Scroll visas när listan blir för lång (ca. 8 alternativ). Den krymper för att passa antalet alternativ, om de
          är få.</li>
        <li>Sökfält för filtrering visas vid över 20 val.</li>
        <li>Om alternativets text är lång, bryts texten på flera rader.</li>
      </ul>
      <p>Detta kan ställas in vid implementation:</p>
      <ul>
        <li>Val av ett alternativ åt gången eller flera (multiselect).</li>
        <li>Visning av valda alternativ antingen i klartext eller antal valda alternativ. Om klartext väljs, skapas en
          lista av alla valda alternativ som är synlig i sin helhet i tooltip på hover. Om det är lämpligt att ställa in
          en annan visningstext för den listan, går det att lägga in per alternativ.</li>
        <li>Alternativen kan utformas så som är lämpligt för det specifika fallet. T.ex. kan varje alternativ kan ha
          flera informationsbitar, om en stödinformation behövs för att göra valet.</li>
        <li>Texten som visas innan val gjorts kan ställas in fritt.</li>
      </ul>
      <p> Förändras med tema:
        <strong>ja</strong>
      </p>
    </div>
    <div class="docs__examples">
      <section>
        <div class="row-layout">
          <div class="one-third">
            <p>Liten, 5 alternativ</p>
            <vgr-combobox width="130px">
              <vgr-combobox-item *ngFor="let item of items5">{{item}}</vgr-combobox-item>
            </vgr-combobox>
          </div>
          <div class="one-third">
            <p>Stor, 50 alternativ</p>
            <vgr-combobox [autocomplete]="false">
              <vgr-combobox-item *ngFor="let item of items50">{{item}}</vgr-combobox-item>
            </vgr-combobox>
          </div>
          <div class="one-third">
            <p>Alternativ med extra information</p>
            <vgr-combobox [width]="'100%'">
              <vgr-combobox-item *ngFor="let item of items50">
                <div>{{item}}</div>
                <div style="font-style: italic">&nbsp;Information</div>
              </vgr-combobox-item>
            </vgr-combobox>
          </div>
        </div>
      </section>
      <section>
        <div class="row-layout">
          <div class="one-third">
            <p>Aktiv</p>
            <vgr-combobox width="130px" [formControl]="form">
              <vgr-combobox-item [value]="itemValue">{{itemLabel}}</vgr-combobox-item>
            </vgr-combobox>
          </div>
          <div class="one-third">
            <p>Inaktiv</p>
            <vgr-combobox width="130px" [disabled]="true" [formControl]="form">
              <vgr-combobox-item [value]="itemValue">{{itemLabel}}</vgr-combobox-item>
            </vgr-combobox>
          </div>
          <div class="one-third">
            <p>Endast visning</p>
            <vgr-combobox [small]="false" [readonly]="true" [formControl]="form">
              <vgr-combobox-item [value]="itemValue">
                {{itemLabel}}
              </vgr-combobox-item>
            </vgr-combobox>
          </div>
        </div>
      </section>
      <section>
        <div class="row-layout">
          <div class="one-third">
            <h3>Reactive</h3>
            <vgr-combobox [formControl]="formControl">
              <vgr-combobox-item *ngFor="let item of items5">{{item}}</vgr-combobox-item>
            </vgr-combobox>
          </div>

          <div class="one-third">
            <h3 id="label">Combobox</h3>
            <vgr-combobox #combobox1 [small]="true" [formControl]="form" [labelId]="'label'" [readonly]="readonly" [showButton]="true" [disabled]="disabled" [listAlignRight]="true" [allowFreeText]="true">
              <vgr-combobox-item [value]="item" *ngFor="let item of items50">{{item}} {{ item.index }}</vgr-combobox-item>
            </vgr-combobox>
            <span> &nbsp;&nbsp; {{ combobox1.value }}</span>
            <br><br>          
          </div>

          <div class="one-third">
            <h3>Combobox mer info</h3>
            <vgr-combobox #combobox2 width="200px" [listAlignRight]="true" [formControl]="form" [readonly]="readonly" [showButton]="false" [disabled]="disabled" [showButton]="true">
              <vgr-combobox-item [value]="item" *ngFor="let item of items50">
                <div>{{item}}</div>
                <div style="font-style: italic"> Information</div>
              </vgr-combobox-item>
            </vgr-combobox>
            <br><br><br><br><br><br><br><br><br><br>
          </div>
        </div>
      </section>
      <section>
        <h3>&nbsp;</h3>
        <vgr-button (click)="readonly = (!readonly)">Readonly</vgr-button>
        <br><br>
        <vgr-button (click)="disabled = (!disabled)">Inaktiv</vgr-button>
        <br><br>
      </section>
    </div>
    <div class="docs__api">
      <h2>Combobox</h2>
      <table class="property-table">
        <tr>
          <th>Namn</th>
          <th>Beskrivning</th>
          <th>Exempel</th>
        </tr>
        <tr>
          <td>readonly: boolean</td>
          <td>Gör att textfält med valt värde visas. Förvalt värde är
            <code>false</code>.</td>
          <td>[readonly]="true"</td>
        </tr>
        <tr>
          <td>disabled: boolean</td>
          <td>Förhindrar interaktion. Förvalt värde är
            <code>false</code>.</td>
          <td>[disabled]="true"</td>
        </tr>
        <tr>
          <td>showButton: boolean</td>
          <td>Visa knapp  knapp för att fälla ut listan med alternativ. Förvalt värde är
            <code>true</code>.</td>
          <td>[showButton]="false"</td>
        </tr>
        <tr>
          <td>value: any</td>
          <td>Värde att binda till.</td>
          <td>[value]="object.code"</td>
        </tr>        
        <tr>
          <td>showValidation: boolean</td>
          <td>Anger om valideringsfel ska visas eller ej. Förvalt värde är
            <code>false</code>.</td>
          <td>[showValidation]="true"</td>
        </tr>
        <tr>
          <td>errorMessage: string</td>
          <td>Text som visas vid valideringsfel. Man behöver använda sig av Reactive Forms eller NgModel för att deta skall synas. 
            Vid ngModel skickar man in en sträng. Använder man Reactive Forms kan man antingen skicka in en sträng elelr ett objekt med felmedelandekoden som nyckel och en text. 
            Man kan på detta sätt ha olika felmedelanden för olika valideringsfel.
            <code>false</code>.</td>
          <td>[errorMessage]="'Obligatorisk'"</td>
        </tr>
        <tr>
          <td>small: boolean</td>
          <td>Gör det valda alternativet kortare. Förvalt värde är
            <code>false</code>.</td>
          <td>[small]="true"</td>
        </tr>
        <tr>
          <td>width: string</td>
          <td>Bredden på input-fältet. Default - '270px'</td>
          <td>width="130px"</td>
        </tr>
        <tr>
          <td>listAlignRight: boolean</td>
          <td>Gör att listboxens position linjerar med textfältet till höger. Förvalt värde är vänster (false).</td>
          <td>listAlignRight="false"</td>
        </tr>
        <tr>
          <td>placeholder: string</td>
          <td>Gör det valda alternativet kortare. Förvalt värde är
            <code>false</code>.</td>
          <td>[placeholder]="'Region'"</td>
        </tr>        
        <tr>
          <td>compareWith: (o1: any, o2: any) => boolean</td>
          <td>Möjlighet att ändra hur items jämförs. Detta är användbart om items sätts om till nya, men motsvarande
            värden, till exempel då de hämtas via ett fjärranrop till servern och detta upprepas. Förvalt värde jämför
            med vanlig equality.</td>
          <td>[compareWith]="o1 === o2"</td>
        </tr>
        <tr>
          <td>selectedChanged: EventEmitter&lt;any&gt;</td>
          <td>Event som triggas när val ändras av användaren. Värdet är det nya valet.</td>
          <td>(selectedChanged)="doSomething($event)"</td>
        </tr>  
        <tr>
          <td>focus()</td>
          <td>Metod man kan anropa för att programmatiskt kan sätta fokus på komponenten. </td>
          <td>this.myDropdown.focus()</td>
        </tr>
      </table>
      <br>
      <h2>ComboboxItem</h2>
      <table class="property-table">
        <tr>
          <th>Namn</th>
          <th>Beskrivning</th>
          <th>Exempel</th>
        </tr>
        <tr>
          <td>selectedLabel: string</td>
          <td>Ger möjlighet att visa en annan text när alternativet är valt.</td>
          <td>[selectedLabel]="'Ett kortare namn'"</td>
        </tr>
        <tr>
          <td>value: any</td>
          <td>Värde att binda till för reactive forms.</td>
          <td>[value]="someObject"</td>
        </tr>
        <tr>
          <td>selectedChanged: EventEmitter&lt;any&gt;</td>
          <td>Event som triggas när val ändras av användaren. Värdet är <code>true</code> om alternativet valts.
            om det avvalts. Används av <code>&lt;vgr-combobox&gt;</code>.</td>
          <td></td>
        </tr>
      </table>
    </div>
    <div class="docs__wcag">
      <p>
        Viktigt att tänka på, är att lägga in en tydlig etikett som skärmläsare kan läsa upp när comboboxen kommer i
        fokus. Smartast är att sätta en rubrik över comboboxen och sedan programmatiskt använda den som etikett för
        comboboxen.
      </p>
      <p>
        Det är bra om alternativen i en dropdowns lista är tydligt urskiljbara och att de inledande tecknen är
        signifikanta. Det gör det lättare att hitta. Fundera över hur användarna letar i listan när du gör design för
        dess innehåll.
      </p>
      <p>
        Comboboxen är byggd att följa WCAG-kraven för combobox (<a
          href="https://www.w3.org/TR/wai-aria-practices/#combobox">https://www.w3.org/TR/wai-aria-practices/#combobox</a>). 
      </p>
      <p>
        Summerat innebär det:
      </p>
      <ul>
        <li>När comboboxen är i fokus, öppnas listan med Enter, pil upp/ner eller så fort man skriver in ett tecken/ord som matchar början på någon av alternativen.</li>
        <li>Enter väljer ett fokuserat alternativ och stänger listan.</li>
        <li>Esc stänger listan utan att göra ett val. Pil upp och ner bläddrar i listan.</li>
        <li>Home respektive End går till listans första respektive sista alternativ.</li>
      </ul>
      <div id="label">Frukt</div>
      <vgr-combobox [labelId]="'label'">
        <vgr-combobox-item> Äpple</vgr-combobox-item>
        <vgr-combobox-item> Banan</vgr-combobox-item>
        <vgr-combobox-item> Apelsin</vgr-combobox-item>
      </vgr-combobox>
    </div>
  </app-component-docs>
  