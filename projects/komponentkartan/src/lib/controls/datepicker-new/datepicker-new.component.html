<div #datepicker class="datepicker-new" (focusout)="onBlur($event)">
  <div class="datepicker-new__header" [ngClass]="{'datepicker-new__header--focus': headerHasFocus}"
    (keydown)="onHeaderKeydown($event)" (click)="focusHeaderInput(); toggleExpanded()">
    <input #headerInput placeholder="ÅÅÅÅMMDD" [value]="label" [disabled]="!allowText || disabled"
      (change)="parseSelectedDate($event.target.value)" (focus)="onHeaderFocus()" (blur)="onHeaderBlur()">
    <div class="datepicker-new__header__button">
      <vgr-icon [icon]="'calendar-alt'" [solid]="false" [color]="'light'" [size]="'lg'"></vgr-icon>
    </div>
  </div>
  <div *ngIf="expanded" class="datepicker-new__calendar">
    <div *ngIf="zoomedToDays">
      <div>
        <span tabindex="0" (click)="days.previous()">&lt;</span>
        <span tabindex="0" (click)="days.zoomOut()">{{days.date | date:'MMMM yyyy'}}</span>
        <span tabindex="0" (click)="days.next()">&gt;</span>
      </div>
      <table>
        <tr>
          <td>Må</td>
          <td>Ti</td>
          <td>On</td>
          <td>To</td>
          <td>Fr</td>
          <td>Lö</td>
          <td>Sö</td>
        </tr>
        <tr *ngFor="let row of days.items">
          <td *ngFor="let item of row">
            <span *ngIf="item" tabindex="0" class="datepicker-new__calendar__item"
              [ngClass]="{'datepicker-new__calendar__item--selected': item.selected, 'datepicker-new__calendar__item--current': item.current}"
              (click)="item.onClick()">{{item.date | date:'d'}}</span>
          </td>
        </tr>
      </table>
    </div>
    <div *ngIf="zoomedToMonths">
      <div>
        <span tabindex="0" (click)="months.previous()">&lt;</span>
        <span tabindex="0" (click)="months.zoomOut()">{{months.date | date:'yyyy'}}</span>
        <span tabindex="0" (click)="months.next()">&gt;</span>
      </div>
      <table>
        <tr *ngFor="let row of months.items">
          <td *ngFor="let item of row" tabindex="0" class="datepicker-new__calendar__item"
            [ngClass]="{'datepicker-new__calendar__item--selected': item.selected, 'datepicker-new__calendar__item--current': item.current}"
            (click)="item.onClick()">
            {{item.date | date:'MMM'}}</td>
        </tr>
      </table>
    </div>
    <div *ngIf="zoomedToYears">
      <div>
        <span tabindex="0" (click)="years.previous()">&lt;</span>
        <span tabindex="0" (click)="years.next()">&gt;</span>
      </div>
      <table>
        <tr *ngFor="let row of years.items">
          <td *ngFor="let item of row" tabindex="0" class="datepicker-new__calendar__item"
            [ngClass]="{'datepicker-new__calendar__item--selected': item.selected, 'datepicker-new__calendar__item--current': item.current}"
            (click)="item.onClick()">
            {{item.date | date:'yyyy'}}
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>